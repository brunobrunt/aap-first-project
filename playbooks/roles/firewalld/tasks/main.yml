---
- name: Install ansible.posix collection
  ansible.builtin.command:
    cmd: ansible-galaxy collection install ansible.posix

- name: Install firewalld
  ansible.builtin.dnf:
    name: firewalld
    state: present

- name: Enable and start firewalld
  ansible.builtin.service:
    name: firewalld
    state: started
    enabled: true
- name: Open HTTP port for nginx
  ansible.builtin.shell:
    cmd: |
      firewall-cmd --permanent --add-service=http
      firewall-cmd --reload
    become: yes
  register: firewall_result
  changed_when: "'already' not in firewall_result.stdout"
