---
# Stop Apache if running (port 80 conflict)
- name: Stop and disable httpd if present
  ansible.builtin.service:
    name: httpd
    state: stopped
    enabled: false
  ignore_errors: true

- name: Install nginx via Satellite content
  ansible.builtin.dnf:
    name: nginx
    state: present

- name: Enable and start nginx
  ansible.builtin.service:
    name: nginx
    state: started
    enabled: true

